<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Add old package versions to a miniCRAN repository. — addOldPackage â€¢ miniCRAN</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>
  
  
<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">miniCRAN</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/miniCRAN-dependency-graph.html">Using miniCRAN to identify package dependencies</a>
    </li>
    <li>
      <a href="../articles/miniCRAN-introduction.html">Using miniCRAN to create a local CRAN repository</a>
    </li>
    <li>
      <a href="../articles/miniCRAN-non-CRAN-repos.html">Using repositories other than CRAN with miniCRAN</a>
    </li>
  </ul>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/andrie/miniCRAN">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Add old package versions to a miniCRAN repository.</h1>
    </div>

    
    <p>Will download and add older source package versions. Older binary versions are not normally available on CRAN and should be build from source on the platform for which they are required. As such, specifying <code>type!="source"</code> will likely fail as the download will not be successful.</p>
    

    <pre class="usage"><span class='fu'>addOldPackage</span>(<span class='kw'>pkgs</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>path</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>vers</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>repos</span> <span class='kw'>=</span> <span class='fu'>getOption</span>(<span class='st'>"repos"</span>), <span class='kw'>type</span> <span class='kw'>=</span> <span class='st'>"source"</span>, <span class='kw'>Rversion</span> <span class='kw'>=</span> <span class='no'>R.version</span>,
  <span class='kw'>writePACKAGES</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>deps</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>quiet</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>pkgs</th>
      <td><p>Character vector of packages to download</p></td>
    </tr>
    <tr>
      <th>path</th>
      <td><p>Destination download path. This path is the root folder of your new repository.</p></td>
    </tr>
    <tr>
      <th>vers</th>
      <td><p>The package version to install.</p></td>
    </tr>
    <tr>
      <th>repos</th>
      <td><p>URL(s) of the 'contrib' sections of the repositories, e.g. <code>"http://cran.us.r-project.org"</code>. Passed to <code>available.packages()</code></p></td>
    </tr>
    <tr>
      <th>type</th>
      <td><p>Possible values are (currently) "source", "mac.binary" and "win.binary": the binary types can be listed and downloaded but not installed on other platforms.  Passed to <code>download.packages()</code>.</p></td>
    </tr>
    <tr>
      <th>Rversion</th>
      <td><p>Version of R. Can be specified as a character string with the two digit R version, e.g. "3.1".  Defaults to R.version</p></td>
    </tr>
    <tr>
      <th>writePACKAGES</th>
      <td><p>If TRUE, calls <code>write_PACKAGES()</code> to update the repository PACKAGES file.</p></td>
    </tr>
    <tr>
      <th>deps</th>
      <td><p>logical indicating whether the package dependencies should be added (default <code>TRUE</code>).</p></td>
    </tr>
    <tr>
      <th>quiet</th>
      <td><p>If TRUE, suppress status messages (if any), and the progress bar during download.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>Adds the packages, rebuilds the package index, and invisibly returns the number of packages written to the index files.</p>
    
    <h2 class="hasAnchor" id="note"><a class="anchor" href="#note"></a>Note</h2>

    <p>Dependencies for old package versions cannot be determined automatically and must be specified by the user in <code>pkgs</code> and <code>vers</code>. Thus, <code>deps=FALSE</code> is the default for this function.</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <p>Other update repo functions: <code><a href='addPackage.html'>addPackage</a></code>,
  <code><a href='checkVersions.html'>checkVersions</a></code>, <code><a href='makeRepo.html'>makeRepo</a></code>,
  <code>updatePackages</code></p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'>### `checkVersions` and `add.packages.miniCRAN` require an existing miniCRAN repo</span>

<span class='co'># Specify list of packages to download</span>
<span class='no'>revolution</span> <span class='kw'>&lt;-</span> <span class='fu'>c</span>(<span class='kw'>CRAN</span> <span class='kw'>=</span> <span class='fu'>getOption</span>(<span class='st'>"miniCRAN.mran"</span>))
<span class='no'>pkgs</span> <span class='kw'>&lt;-</span> <span class='fu'>c</span>(<span class='st'>"foreach"</span>)
<span class='no'>pkgTypes</span> <span class='kw'>&lt;-</span> <span class='fu'>c</span>(<span class='st'>"source"</span>, <span class='st'>"win.binary"</span>)

<span class='no'>pdb</span> <span class='kw'>&lt;-</span> <span class='no'>cranJuly2014</span></div><span class='co'># NOT RUN {</span>
  <span class='no'>pdb</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='pkgAvail.html'>pkgAvail</a></span>(<span class='kw'>repos</span> <span class='kw'>=</span> <span class='no'>revolution</span>, <span class='kw'>type</span> <span class='kw'>=</span> <span class='st'>"source"</span>)
<span class='co'># }</span><div class='input'>
<span class='no'>pkgList</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='pkgDep.html'>pkgDep</a></span>(<span class='no'>pkgs</span>, <span class='kw'>availPkgs</span> <span class='kw'>=</span> <span class='no'>pdb</span>, <span class='kw'>repos</span> <span class='kw'>=</span> <span class='no'>revolution</span>, <span class='kw'>type</span> <span class='kw'>=</span> <span class='st'>"source"</span>, <span class='kw'>suggests</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)
<span class='no'>pkgList</span></div><div class='output co'>#&gt; [1] "foreach"   "codetools" "iterators"</div><div class='input'>
</div><span class='co'># NOT RUN {</span>
  <span class='co'># Create temporary folder for miniCRAN</span>
  <span class='fu'>dir.create</span>(<span class='no'>pth</span> <span class='kw'>&lt;-</span> <span class='fu'>file.path</span>(<span class='fu'>tempdir</span>(), <span class='st'>"miniCRAN"</span>))

  <span class='co'># Make repo for source and win.binary</span>
  <span class='fu'><a href='makeRepo.html'>makeRepo</a></span>(<span class='no'>pkgList</span>, <span class='kw'>path</span> <span class='kw'>=</span> <span class='no'>pth</span>, <span class='kw'>repos</span> <span class='kw'>=</span> <span class='no'>revolution</span>, <span class='kw'>type</span> <span class='kw'>=</span> <span class='no'>pkgTypes</span>)

  <span class='co'># Add other versions of a package (and assume these were added previously)</span>
  <span class='no'>oldVers</span> <span class='kw'>&lt;-</span> <span class='fu'>data.frame</span>(<span class='kw'>package</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"foreach"</span>, <span class='st'>"codetools"</span>, <span class='st'>"iterators"</span>),
                        <span class='kw'>version</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"1.4.0"</span>, <span class='st'>"0.2-7"</span>, <span class='st'>"1.0.5"</span>),
                        <span class='kw'>stringsAsFactors</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)
  <span class='no'>pkgs</span> <span class='kw'>&lt;-</span> <span class='no'>oldVers</span>$<span class='no'>package</span>
  <span class='fu'>addOldPackage</span>(<span class='no'>pkgs</span>, <span class='kw'>path</span> <span class='kw'>=</span> <span class='no'>pth</span>, <span class='kw'>vers</span> <span class='kw'>=</span> <span class='no'>oldVers</span>$<span class='no'>version</span>, <span class='kw'>repos</span> <span class='kw'>=</span> <span class='no'>revolution</span>, <span class='kw'>type</span> <span class='kw'>=</span> <span class='st'>"source"</span>)
  <span class='co'># NOTE: older binary versions would need to be build from source</span>

  <span class='co'># List package versions in the miniCRAN repo (produces warning about duplicates)</span>
  <span class='no'>pkgVersionsSrc</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='checkVersions.html'>checkVersions</a></span>(<span class='no'>pkgs</span>, <span class='kw'>path</span> <span class='kw'>=</span> <span class='no'>pth</span>, <span class='kw'>type</span> <span class='kw'>=</span> <span class='st'>"source"</span>)
  <span class='no'>pkgVersionsBin</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='checkVersions.html'>checkVersions</a></span>(<span class='no'>pkgs</span>, <span class='kw'>path</span> <span class='kw'>=</span> <span class='no'>pth</span>, <span class='kw'>type</span> <span class='kw'>=</span> <span class='st'>"win.binary"</span>)

  <span class='co'># After inspecting package versions, remove old versions</span>
  <span class='fu'>basename</span>(<span class='no'>pkgVersionsSrc</span>) <span class='co'># "foreach_1.4.0.tar.gz"  "foreach_1.4.2.tar.gz"</span>
  <span class='fu'>basename</span>(<span class='no'>pkgVersionsBin</span>) <span class='co'># "foreach_1.4.0.zip"     "foreach_1.4.2.zip"</span>
  <span class='fu'>file.remove</span>(<span class='fu'>c</span>(<span class='no'>pkgVersionsSrc</span>[<span class='fl'>1</span>], <span class='no'>pkgVersionsBin</span>[<span class='fl'>1</span>]))

  <span class='co'># Rebuild package index after adding/removing files</span>
  <span class='fu'><a href='makeRepo.html'>updateRepoIndex</a></span>(<span class='no'>pth</span>, <span class='kw'>type</span> <span class='kw'>=</span> <span class='no'>pkgTypes</span>, <span class='kw'>Rversion</span> <span class='kw'>=</span> <span class='no'>R.version</span>)

  <span class='fu'><a href='pkgAvail.html'>pkgAvail</a></span>(<span class='no'>pth</span>, <span class='kw'>type</span> <span class='kw'>=</span> <span class='st'>"source"</span>)

  <span class='co'># Add new packages (from CRAN) to the miniCRAN repo</span>
  <span class='fu'><a href='addPackage.html'>addPackage</a></span>(<span class='st'>"Matrix"</span>, <span class='kw'>path</span> <span class='kw'>=</span> <span class='no'>pth</span>, <span class='kw'>repos</span> <span class='kw'>=</span> <span class='no'>revolution</span>, <span class='kw'>type</span> <span class='kw'>=</span> <span class='no'>pkgTypes</span>)

  <span class='co'># Delete temporary folder</span>
  <span class='fu'>unlink</span>(<span class='no'>pth</span>, <span class='kw'>recursive</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)
<span class='co'># }</span></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#note">Note</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Andrie de
    Vries.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>
