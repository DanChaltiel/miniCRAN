<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Add old package versions to a miniCRAN repository. — addOldPackage • miniCRAN</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Add old package versions to a miniCRAN repository. — addOldPackage"><meta property="og:description" content='Will download and add older source package versions. Older binary versions
are not normally available on CRAN and should be built from source on the
platform for which they are required. As such, specifying type!="source"
will likely fail as the download will not be successful.'><meta property="og:image" content="http://andrie.github.io/miniCRAN/logo.svg"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">miniCRAN</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.2.14.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/miniCRAN-dependency-graph.html">Using miniCRAN to identify package dependencies</a>
    </li>
    <li>
      <a href="../articles/miniCRAN-introduction.html">Using miniCRAN to create and maintain a local CRAN repository</a>
    </li>
    <li>
      <a href="../articles/miniCRAN-non-CRAN-repos.html">Using repositories other than CRAN with miniCRAN</a>
    </li>
  </ul></li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/andrie/miniCRAN/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Add old package versions to a miniCRAN repository.</h1>
    <small class="dont-index">Source: <a href="https://github.com/andrie/miniCRAN/blob/HEAD/R/addPackages.R" class="external-link"><code>R/addPackages.R</code></a></small>
    <div class="hidden name"><code>addOldPackage.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Will download and add older source package versions. Older binary versions
are not normally available on CRAN and should be built from source on the
platform for which they are required. As such, specifying <code>type!="source"</code>
will likely fail as the download will not be successful.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">addOldPackage</span><span class="op">(</span>
  pkgs <span class="op">=</span> <span class="cn">NULL</span>,
  path <span class="op">=</span> <span class="cn">NULL</span>,
  vers <span class="op">=</span> <span class="cn">NULL</span>,
  repos <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"repos"</span><span class="op">)</span>,
  type <span class="op">=</span> <span class="st">"source"</span>,
  Rversion <span class="op">=</span> <span class="va">R.version</span>,
  writePACKAGES <span class="op">=</span> <span class="cn">TRUE</span>,
  deps <span class="op">=</span> <span class="cn">FALSE</span>,
  quiet <span class="op">=</span> <span class="cn">TRUE</span>
<span class="op">)</span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>pkgs</dt>
<dd><p>Character vector of packages to download</p></dd>
<dt>path</dt>
<dd><p>Destination download path. This path is the root folder of your
new repository.</p></dd>
<dt>vers</dt>
<dd><p>The package version to install.</p></dd>
<dt>repos</dt>
<dd><p>URL(s) of the 'contrib' sections of the repositories, e.g.
<code>"http://cran.us.r-project.org"</code>. Passed to <code><a href="https://rdrr.io/r/utils/available.packages.html" class="external-link">available.packages()</a></code></p></dd>
<dt>type</dt>
<dd><p>Possible values are (currently) "source", "mac.binary" and
"win.binary": the binary types can be listed and downloaded but not
installed on other platforms.  Passed to <code><a href="https://rdrr.io/r/utils/download.packages.html" class="external-link">download.packages()</a></code>.</p></dd>
<dt>Rversion</dt>
<dd><p>Version of R (only used if <code>type</code> is not <code>source</code>.) Defaults to <a href="https://rdrr.io/r/base/Version.html" class="external-link">R.version</a>, but this can be specified as any of the following formats:</p><ul><li><p>a character string with the two digit R version, e.g. "3.1"</p></li>
<li><p>a list with components <code>major</code> and <code>minor</code></p></li>
<li><p>the result of <code><a href="https://rdrr.io/r/base/numeric_version.html" class="external-link">getRversion()</a></code></p></li>
<li><p>the result of <a href="https://rdrr.io/r/base/Version.html" class="external-link">R.version</a></p></li>
</ul></dd>
<dt>writePACKAGES</dt>
<dd><p>If TRUE, calls <code>write_PACKAGES()</code> to update the
repository PACKAGES file.</p></dd>
<dt>deps</dt>
<dd><p>logical indicating whether the package dependencies should be
added (default <code>TRUE</code>).</p></dd>
<dt>quiet</dt>
<dd><p>If TRUE, suppress status messages (if any), and the progress bar
during download.</p></dd>
</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>Adds the packages, rebuilds the package index, and invisibly returns
the number of packages written to the index files.</p>
    </div>
    <div id="note">
    <h2>Note</h2>
    <p>Dependencies for old package versions cannot be determined
automatically and must be specified by the user in <code>pkgs</code> and <code>vers</code>. Thus,
<code>deps=FALSE</code> is the default for this function.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p>Other update repo functions: 
<code><a href="addPackage.html">addPackage</a>()</code>,
<code><a href="checkVersions.html">checkVersions</a>()</code>,
<code><a href="makeRepo.html">makeRepo</a>()</code>,
<code><a href="updatePackages.html">updatePackages</a>()</code></p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="co">### `checkVersions` and `add.packages.miniCRAN` require an existing miniCRAN repo</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Specify list of packages to download</span></span>
<span class="r-in"><span class="va">revolution</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>CRAN <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"minicran.mran"</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in"><span class="va">revolution</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                         CRAN </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> "https://cran.microsoft.com" </span>
<span class="r-in"><span class="va">pkgs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"foreach"</span><span class="op">)</span></span>
<span class="r-in"><span class="va">pkgTypes</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"source"</span>, <span class="st">"win.binary"</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">pdb</span> <span class="op">&lt;-</span> <span class="va">cranJuly2014</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span>
<span class="r-in">  <span class="va">pdb</span> <span class="op">&lt;-</span> <span class="fu"><a href="pkgAvail.html">pkgAvail</a></span><span class="op">(</span>repos <span class="op">=</span> <span class="va">revolution</span>, type <span class="op">=</span> <span class="st">"source"</span><span class="op">)</span></span>
<span class="r-in"><span class="op">}</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">pkgList</span> <span class="op">&lt;-</span> <span class="fu"><a href="pkgDep.html">pkgDep</a></span><span class="op">(</span><span class="va">pkgs</span>, availPkgs <span class="op">=</span> <span class="va">pdb</span>, repos <span class="op">=</span> <span class="va">revolution</span>, type <span class="op">=</span> <span class="st">"source"</span>, suggests <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span class="r-in"><span class="va">pkgList</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "foreach"   "codetools" "iterators"</span>
<span class="r-in"></span>
<span class="r-in"><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span>
<span class="r-in">  <span class="co"># Create temporary folder for miniCRAN</span></span>
<span class="r-in">  <span class="fu"><a href="https://rdrr.io/r/base/files2.html" class="external-link">dir.create</a></span><span class="op">(</span><span class="va">pth</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"miniCRAN"</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in">  <span class="co"># Make repo for source and win.binary</span></span>
<span class="r-in">  <span class="fu"><a href="makeRepo.html">makeRepo</a></span><span class="op">(</span><span class="va">pkgList</span>, path <span class="op">=</span> <span class="va">pth</span>, repos <span class="op">=</span> <span class="va">revolution</span>, type <span class="op">=</span> <span class="va">pkgTypes</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in">  <span class="co"># Add other versions of a package (and assume these were added previously)</span></span>
<span class="r-in">  <span class="va">oldVers</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>package <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"foreach"</span>, <span class="st">"codetools"</span>, <span class="st">"iterators"</span><span class="op">)</span>,</span>
<span class="r-in">                        version <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"1.4.0"</span>, <span class="st">"0.2-7"</span>, <span class="st">"1.0.5"</span><span class="op">)</span>,</span>
<span class="r-in">                        stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span class="r-in">  <span class="va">pkgs</span> <span class="op">&lt;-</span> <span class="va">oldVers</span><span class="op">$</span><span class="va">package</span></span>
<span class="r-in">  <span class="fu">addOldPackage</span><span class="op">(</span><span class="va">pkgs</span>, path <span class="op">=</span> <span class="va">pth</span>, vers <span class="op">=</span> <span class="va">oldVers</span><span class="op">$</span><span class="va">version</span>, repos <span class="op">=</span> <span class="va">revolution</span>, type <span class="op">=</span> <span class="st">"source"</span><span class="op">)</span></span>
<span class="r-in">  <span class="co"># NOTE: older binary versions would need to be build from source</span></span>
<span class="r-in"></span>
<span class="r-in">  <span class="co"># List package versions in the miniCRAN repo (produces warning about duplicates)</span></span>
<span class="r-in">  <span class="va">pkgVersionsSrc</span> <span class="op">&lt;-</span> <span class="fu"><a href="checkVersions.html">checkVersions</a></span><span class="op">(</span><span class="va">pkgs</span>, path <span class="op">=</span> <span class="va">pth</span>, type <span class="op">=</span> <span class="st">"source"</span><span class="op">)</span></span>
<span class="r-in">  <span class="va">pkgVersionsBin</span> <span class="op">&lt;-</span> <span class="fu"><a href="checkVersions.html">checkVersions</a></span><span class="op">(</span><span class="va">pkgs</span>, path <span class="op">=</span> <span class="va">pth</span>, type <span class="op">=</span> <span class="st">"win.binary"</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in">  <span class="co"># After inspecting package versions, remove old versions</span></span>
<span class="r-in">  <span class="fu"><a href="https://rdrr.io/r/base/basename.html" class="external-link">basename</a></span><span class="op">(</span><span class="va">pkgVersionsSrc</span><span class="op">)</span> <span class="co"># "foreach_1.4.0.tar.gz"  "foreach_1.4.2.tar.gz"</span></span>
<span class="r-in">  <span class="fu"><a href="https://rdrr.io/r/base/basename.html" class="external-link">basename</a></span><span class="op">(</span><span class="va">pkgVersionsBin</span><span class="op">)</span> <span class="co"># "foreach_1.4.0.zip"     "foreach_1.4.2.zip"</span></span>
<span class="r-in">  <span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.remove</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">pkgVersionsSrc</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, <span class="va">pkgVersionsBin</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in">  <span class="co"># Rebuild package index after adding/removing files</span></span>
<span class="r-in">  <span class="fu"><a href="makeRepo.html">updateRepoIndex</a></span><span class="op">(</span><span class="va">pth</span>, type <span class="op">=</span> <span class="va">pkgTypes</span>, Rversion <span class="op">=</span> <span class="va">R.version</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in">  <span class="fu"><a href="pkgAvail.html">pkgAvail</a></span><span class="op">(</span><span class="va">pth</span>, type <span class="op">=</span> <span class="st">"source"</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in">  <span class="co"># Add new packages (from CRAN) to the miniCRAN repo</span></span>
<span class="r-in">  <span class="fu"><a href="addPackage.html">addPackage</a></span><span class="op">(</span><span class="st">"Matrix"</span>, path <span class="op">=</span> <span class="va">pth</span>, repos <span class="op">=</span> <span class="va">revolution</span>, type <span class="op">=</span> <span class="va">pkgTypes</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in">  <span class="co"># Delete temporary folder</span></span>
<span class="r-in">  <span class="fu"><a href="https://rdrr.io/r/base/unlink.html" class="external-link">unlink</a></span><span class="op">(</span><span class="va">pth</span>, recursive <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span class="r-in"><span class="op">}</span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Andrie de Vries.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

      </footer></div>

  


  

  </body></html>

